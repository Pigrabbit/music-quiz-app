(this["webpackJsonpmusic-quiz-app"]=this["webpackJsonpmusic-quiz-app"]||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/playbutton.75be2c69.svg"},42:function(e,t,a){e.exports=a.p+"static/media/pauseButton.e55175de.svg"},46:function(e,t,a){e.exports=a(77)},51:function(e,t,a){},52:function(e,t,a){},57:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),i=(a(51),a(5)),s=a(6),l=a(8),u=a(7),m=a(14),p=a(2),d=(a(52),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement(m.b,{to:{pathname:"/"}},r.a.createElement("button",{className:"header__home-btn"},r.a.createElement("p",null," Back to home "))),r.a.createElement("h3",{className:"header__text"},"Music Quiz APP"))}}]),a}(r.a.Component)),h=(a(57),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n.state.category=n.props.category,n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("article",{className:"category",id:this.state.category},r.a.createElement("h4",{className:"category__container"},this.state.category),r.a.createElement(m.b,{to:{pathname:"/quiz",state:{category:this.state.category}}},r.a.createElement("button",{className:"category__startBtn"},r.a.createElement("p",null,"Take Quiz"))))}}]),a}(r.a.Component)),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={categories:["k-pop"]},localStorage.clear(),n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(d,null),r.a.createElement("section",{className:"container"},this.state.categories.map((function(e,t){return r.a.createElement(h,{key:t,category:e})}))))}}]),a}(r.a.Component),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("section",{className:"container"},r.a.createElement("h1",null,"404 NOT FOUND")))}}]),a}(r.a.Component),y=a(33),g=a(29),v=a.n(g),O=a(38),E=a(18),j=a(9),k=a(39),S=a(30),C=a.n(S),I=a(42),x=a.n(I),N=(a(71),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,videoID:"",autoplay:"0",loop:"1",player:null},n.state.options={height:"0",width:"0",playerVars:{autoplay:n.state.autoplay,loop:n.state.loop,start:n.props.start,end:n.props.end,wmode:"opaque",origin:"https://pigrabbit.github.io/music-quiz-app/#/quiz"}},n.state.controlButton=C.a,n.state.videoID=n.props.videoID,n.audioPlayer=r.a.createRef(),n}return Object(s.a)(a,[{key:"toggleControlButton",value:function(e){this.setState({controlButton:e?x.a:C.a})}},{key:"onPlayerStateChange",value:function(e){0===e.data&&(this.toggleControlButton(!1),this.state.player.seekTo(this.props.start),this.state.player.pauseVideo())}},{key:"onPlayerReady",value:function(e){var t=this;this.toggleControlButton(5!==e.target.getPlayerState()),this.setState({player:e.target,isLoading:!1}),this.audioPlayer.current.addEventListener("click",(function(){1===t.state.player.getPlayerState()||3===t.state.player.getPlayerState()?(t.state.player.pauseVideo(),t.toggleControlButton(!1)):(t.state.player.playVideo(),t.toggleControlButton(!0))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"audio-player",ref:this.audioPlayer},this.state.isLoading?r.a.createElement("div",{className:"loader"}):r.a.createElement("img",{src:this.state.controlButton,alt:"control-button",className:"audio-player__control-button"}),r.a.createElement(k.a,{videoId:this.state.videoID,host:"https://www.youtube.com",opts:this.state.options,onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}))}}]),a}(r.a.Component)),w=a(81),P="card",B=(a(72),a(80)),_=(a(73),function(e){var t=Object(n.useState)(e.content),a=Object(j.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(e.type),s=Object(j.a)(i,2),l=s[0],u=s[1];Object(n.useEffect)((function(){o(e.content),u(e.type)}),[e.content,e.type]);var m=Object(B.a)({item:{type:P,id:e.id,content:e.content,cardType:e.type},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=Object(j.a)(m,2),d=p[0].isDragging,h=p[1];return r.a.createElement("div",{className:"answer-card-".concat(l),id:e.id,ref:h,style:{opacity:d?"0.5":"1"}},r.a.createElement("h4",null,c))}),z=function(e){var t=Object(n.useContext)(q),a=t.chooseAnswer,c=t.isCorrectAnswer,o=Object(n.useState)(e.cards),i=Object(j.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)(),m=Object(j.a)(u,2),p=m[0],d=m[1],h=e.handler,b=h.incrementProblemIdx,f=h.incrementScore;Object(n.useEffect)((function(){l(e.cards),d(e.cards)}),[e.cards]);var y=Object(w.a)({accept:P,drop:function(e,t){try{if(E(e.cardType))throw Error()}catch(n){return void alert("same type submitted")}a(e.id)},collect:function(e){return{isOver:!!e.isOver()}}}),g=Object(j.a)(y,2),v=g[0].isOver,O=g[1],E=function(e){return p.some((function(t){return t.type===e}))};return r.a.createElement("div",{className:"target-board",ref:O,style:{backgroundColor:v?"#26de81":"#d1d8e0"}},r.a.createElement("h3",{className:"target-board__instruction"},"Move answer here"),s.map((function(e,t){return r.a.createElement(_,{content:e.content,id:e.id,type:e.type,key:t})})),r.a.createElement("button",{className:"target-board__submit-btn",onClick:function(){p.length>2&&alert("pick a track of an artist");var e="",t="";p.forEach((function(a){"track"===a.type&&(t=a.content),"artist"===a.type&&(e=a.content)})),c(t,e)&&f(),b()}},"submit"))},D=function(e){var t=Object(n.useContext)(q).unchooseAnswer,a=Object(n.useState)(e.cards),c=Object(j.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){i(e.cards)}),[e.cards]);var s=Object(w.a)({accept:P,drop:function(e,a){t(e.id)},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(j.a)(s,2),u=(l[0].isOver,l[1]);return r.a.createElement("div",{className:"source-board",ref:u},o.map((function(e,t){return r.a.createElement(_,{content:e.content,id:e.id,type:e.type,key:t})})))},q=(a(75),Object(n.createContext)({chooseAnswer:null,unchooseAnswer:null,isCorrectAnswer:null})),M=function(e){var t=Object(n.useState)(e.problem),a=Object(j.a)(t,2),c=a[0],o=(a[1],Object(n.useState)(e.isVisible)),i=Object(j.a)(o,2),s=i[0],l=i[1];Object(n.useEffect)((function(){l(e.isVisible)}),[e]);var u=Object(n.useState)(e.problem.trackOptions.map((function(e,t){return{id:t,content:e,status:"notChosen",type:"track"}})).concat(e.problem.artistOptions.map((function(e,t){return{id:t+3,content:e,status:"notChosen",type:"artist"}})))),m=Object(j.a)(u,2),p=m[0],d=m[1];return r.a.createElement(q.Provider,{value:{chooseAnswer:function(e){var t=p.filter((function(t){return t.id===e}));t[0].status="chosen",d(p.filter((function(t){return t.id!==e})).concat(t[0]))},unchooseAnswer:function(e){var t=p.filter((function(t){return t.id===e}));t[0].status="notChosen",d(p.filter((function(t){return t.id!==e})).concat(t[0]))},isCorrectAnswer:function(e,t){return e===c.track&&t===c.artist}}},r.a.createElement("div",{className:"problem-box-".concat(s)},r.a.createElement(N,{className:"audio-player",videoID:c.videoID,start:c.startSeconds,end:c.endSeconds}),r.a.createElement(D,{cards:p.filter((function(e,t){return"notChosen"===e.status}))}),r.a.createElement(z,{handler:e.handler,cards:p.filter((function(e,t){return"chosen"===e.status}))})))},T=a(44),A=a(79),J=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={category:"",redirect:!1,score:0,problemIdx:0,problems:[]},n.state.category=void 0===n.props.location.state?localStorage.getItem("category"):n.props.location.state.category,void 0!==n.props.location.state&&localStorage.setItem("category",JSON.stringify(n.props.location.state.category)),n.incrementProblemIdx=n.incrementProblemIdx.bind(Object(E.a)(n)),n.incrementScore=n.incrementScore.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"fetchMusicProblems",value:function(){var e=Object(O.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://musicquiz.peeraurum.com/api/problems");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.problems,r=this.generateMultipleChoice(n),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"incrementProblemIdx",value:function(){localStorage.setItem("problemIdx",JSON.stringify(this.state.problemIdx+1)),this.setState((function(e){return{problemIdx:e.problemIdx+1}}))}},{key:"incrementScore",value:function(){localStorage.setItem("score",JSON.stringify(this.state.score+1)),this.setState((function(e){return{score:e.score+1}}))}},{key:"isEnd",value:function(){return this.state.problemIdx===this.state.problems.length}},{key:"generateMultipleChoice",value:function(e){e.map((function(e){return e.track})),e.map((function(e){return e.artist}));return e.map((function(e,t,a){var n=a.filter((function(t){return t.id!==e.id})).map((function(e){return e.track})).sort((function(){return.5-Math.random()})).slice(0,2);n.push(e.track);var r=a.filter((function(t){return t.id!==e.id})).map((function(e){return e.artist})).sort((function(){return.5-Math.random()})).slice(0,2);return r.push(e.artist),Object(y.a)(Object(y.a)({},e),{},{trackOptions:n,artistOptions:r})}))}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("category"),a=null===localStorage.getItem("problemIdx")?0:JSON.parse(localStorage.getItem("problemIdx")),n=null===localStorage.getItem("score")?0:JSON.parse(localStorage.getItem("score"));this.fetchMusicProblems().then((function(r){console.log(r),e.setState({problems:r,category:t,problemIdx:a,score:n})})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(){this.isEnd()&&this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(p.a,{to:{pathname:"/quizend",state:{numCorrect:this.state.score,numTotal:this.state.problems.length}}}):r.a.createElement(A.a,{backend:T.a},r.a.createElement("div",{className:"wrapper"},r.a.createElement(d,null),r.a.createElement("section",{className:"container"},r.a.createElement("h3",{className:"instruction"},"Move a artist card and a track card to the the right!"),r.a.createElement("h3",null,"Category: ",this.state.category),r.a.createElement("h4",null,"Score: ",this.state.score,"/",this.state.problemIdx),this.state.problems.map((function(t,a){return r.a.createElement(M,{problem:t,handler:{incrementProblemIdx:e.incrementProblemIdx,incrementScore:e.incrementScore},isVisible:a==e.state.problemIdx?"visible":"invisible",key:a})})))))}}]),a}(r.a.Component),V=(a(76),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={numCorrect:0,numTotal:0},n.state.numCorrect=n.props.location.state.numCorrect,n.state.numTotal=n.props.location.state.numTotal,n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(d,null),r.a.createElement("section",{className:"container"},r.a.createElement("h1",null,"Thank you for taking quiz! visit agian!!"),r.a.createElement("h3",null,"Your Score: ",this.state.numCorrect," / ",this.state.numTotal),r.a.createElement(m.b,{to:{pathname:"/"}},r.a.createElement("button",null,r.a.createElement("p",null,"Back to Home")))))}}]),a}(r.a.Component)),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:b}),r.a.createElement(p.b,{exact:!0,path:"/404",component:f}),r.a.createElement(p.b,{exact:!0,path:"/quiz",component:J}),r.a.createElement(p.b,{exact:!0,path:"/quizend",component:V}),r.a.createElement(p.a,{to:"/404"})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.32c90bc3.chunk.js.map